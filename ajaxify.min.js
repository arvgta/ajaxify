(function(e){e.fn.hoverIntent=function(t,n,r){var i={interval:100,sensitivity:7,timeout:0};if(typeof t==="object"){i=e.extend(i,t)}else if(e.isFunction(n)){i=e.extend(i,{over:t,out:n,selector:r})}else{i=e.extend(i,{over:t,out:t,selector:n})}var s,o,u,a;var f=function(e){s=e.pageX;o=e.pageY};var l=function(t,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if(Math.abs(u-s)+Math.abs(a-o)<i.sensitivity){e(n).off("mousemove.hoverIntent",f);n.hoverIntent_s=1;return i.over.apply(n,[t])}else{u=s;a=o;n.hoverIntent_t=setTimeout(function(){l(t,n)},i.interval)}};var c=function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t);t.hoverIntent_s=0;return i.out.apply(t,[e])};var h=function(t){var n=jQuery.extend({},t);var r=this;if(r.hoverIntent_t){r.hoverIntent_t=clearTimeout(r.hoverIntent_t)}if(t.type=="mouseenter"){u=n.pageX;a=n.pageY;e(r).on("mousemove.hoverIntent",f);if(r.hoverIntent_s!=1){r.hoverIntent_t=setTimeout(function(){l(n,r)},i.interval)}}else{e(r).off("mousemove.hoverIntent",f);if(r.hoverIntent_s==1){r.hoverIntent_t=setTimeout(function(){c(n,r)},i.timeout)}}};return this.on({"mouseenter.hoverIntent":h,"mouseleave.hoverIntent":h},i.selector)}})(jQuery);(function($){var All=function(){this.a=function($this,t,fn){$this.each(function(i){t=t.split("*").join("$(this)");t+=";";eval(t)})}};$.fn.all=function(e,t){var n=$(this);$.fn.all.o=$.fn.all.o?$.fn.all.o:new All;$.fn.all.o.a(n,e,t);return n}})(jQuery);(function(e){var t=function(t){var n=window.console,r,i,s=e.extend({verbosity:0},t);r=s["verbosity"];this.a=function(e,t){if(t>=0)i=t;r>i&&n&&n.log(e)}};e.log=function(n,r,i){e.log.o=e.log.o?e.log.o:new t(i);e.log.o.a(n,r)}})(jQuery);(function(e){var t=function(){var t,n=[];var r=function(e){for(var r=0;r<n.length;r++)if(n[r][0]==e){t=n[r][1];return}t=false};var i=function(e){var t=e.getResponseHeader("Content-Type");return t&&(t.indexOf("text/html")+1||t.indexOf("text/xml")+1)};var s=function(t){var n=String(t).replace(/<\!DOCTYPE[^>]*>/i,"").replace(/<(html|head|body|title|meta|script|link)([\s\>])/gi,'<div class="document-$1"$2').replace(/<\/(html|head|body|title|meta|script|link)\>/gi,"</div>");n=e.trim(n);return n};var o=function(e){var n=function(e){e.html(t.find("#"+e.attr("id")).html())};e.all("fn(*)",n);var r=function(e){t.find("#"+e.attr("id")).remove()};e.all("fn(*)",r)};var u=function(o,u,a){if(o.indexOf("#")+1)o=o.split("#")[0];if(a)t=null;else r(o);if(!t){var f=e.ajax({url:o,type:a?"POST":"GET",data:a?a.data:null,success:function(r){if(!r||!i(f)){if(!mode)location=o}t=e(s(r));t.find(".ignore").remove();n.push([o,t]);u&&u()}});return}u&&u();return};this.a=function(e,n,r,i){if(!n)return t;if(n.indexOf("/")!=-1){u(n,r,i);return}if(n=="+"){u(r);return}if(n.charAt(0)=="#"){t.find(n).html(r);n="-"}if(n=="-"){o(e);return e}return t.find(".document-"+n)}};e.fn.getPage=function(n,r,i){var s=e(this);e.fn.getPage.o=e.fn.getPage.o?e.fn.getPage.o:new t;return e.fn.getPage.o.a(s,n,r,i)}})(jQuery);(function(e){var t=function(t){var n=function(t,n){if(n=="href"){e("head").append('<link rel="stylesheet" type="text/css" '+n+'="'+t+'" />')}else{e("head").append('<script type="text/javascript" '+n+'="'+t+'" />')}e.log(n+" + : "+t)},r=function(t,n){if(n=="href")e("link["+n+"*='"+t+"']").remove();else e("script["+n+"*='"+t+"']").remove();e.log(n+" - : "+t)},i=function(e,t){if(!e)return false;for(var n=0;n<t.length;n++){if(t[n][0]==e){t[n][1]=1;return true}}return false};this.a=function(t,s,o,u){switch(s){case"f":return i(t,u);case"i":return n(t,o);case"r":return r(t,o);default:e.log("Bad operator in Script")}}};e.addScript=function(n,r,i,s){e.addScript.o=e.addScript.o?e.addScript.o:new t;return e.addScript.o.a(n,r,i,s)}})(jQuery);(function(e){var t=function(t){var n=[],r,i=0,s=e.extend({deltas:true},t);this.a=function(t,r,o){e.log("Entering Scripts a()");if(!s["deltas"]){t.each(function(){e.addScript(e(this)[0],"i",r)});return}if(i)t.each(function(){if(e(this).attr("data-class")=="always"){e.log("Class always detected!");e.addScript(e(this).attr(r),"i",r);e(this).remove()}});if(o){for(var u=0;u<$scriptsN.length;u++){if($scriptsN[u][1]==0){e.addScript($scriptsN[u][0],"i",r);e.log("Adding old script : "+$scriptsN[u][0])}}return}$scriptsN=[];t.each(function(){$scriptsN.push([e(this).attr(r),0]);if(!i)n.push([e(this).attr(r),0])});i++;for(var u=0;u<n.length;u++){n[u][1]=2;if(e.addScript(n[u][0],"f",r,$scriptsN))n[u][1]=1}for(var u=0;u<n.length;u++){if(n[u][1]==2){if(n[u][0])e.addScript(n[u][0],"r",r);n.splice(u,1)}}for(var u=0;u<$scriptsN.length;u++){if($scriptsN[u][1]==0)e.addScript($scriptsN[u][0],"i",r)}n=$scriptsN.slice()}};e.fn.addScripts=function(n,r,i){$this=e(this);if(n=="href"){e.fn.addScripts.h=$this.length?e.fn.addScripts.h:new t(i);if($this.length)e.fn.addScripts.h.a($this,n,r)}else{e.fn.addScripts.s=$this.length?e.fn.addScripts.s:new t(i);if($this.length)e.fn.addScripts.s.a($this,n,r)}return $this}})(jQuery);(function(e){var t=function(t){var n,r,i={},s={},o=0,u=e.extend({deltas:true},t),a=function(t){if(t)return;e.log("Entering det");var n=e().getPage("link"),r=e().getPage("script");i.c=n.filter(function(){return e(this).attr("rel").indexOf("stylesheet")!=-1});i.s=r.filter(function(){return e(this).attr("src")});i.t=r.filter(function(){return!e(this).attr("src")})},f=function(e){var t=u["inline-hints"],n=false;t=t.split(", ");for(var r=0;r<t.length;r++)if(e.indexOf(t[r])+1)n=true;return n},l=function(){e.log("Entering addtxts");i.t.each(function(){var t=e(this).html();if(t.indexOf(").ajaxify(")==-1&&(u["inline"]||e(this).hasClass("ajaxy")||f(t))){try{e.globalEval(t)}catch(n){alert(n)}}return true})},c=function(t){e.log("Entering scripts.add()");i.c.addScripts("href",t);i.s.addScripts("src",t);l()};this.a=function(e){a(e);if(o++)c(e);else{i.c.addScripts("href");i.s.addScripts("src")}s.t=null};n=u["deltas"];e().addScripts("href",null,u);e().addScripts("src",null,u)};e.scripts=function(n,r){e.scripts.o=e.scripts.o?e.scripts.o:new t(n);e.scripts.o.a(r)}})(jQuery);(function(e){var t=function(t,n){var r=e.extend({selector:"a:not(.no-ajaxy)",requestKey:"pronto",requestDelay:0,verbosity:0,deltas:true,inline:false,cb:null,on:true},n),i=function(t){e.scripts(r,t&&t.same);if(r["cb"])r["cb"]()},s=function(t){e.log("Statechange: ");var n=location.href;e.log(n);i(t)};e(function(){var n=window.history&&window.history.pushState&&window.history.replaceState;e.log("Entering ajaxify...",1,r);if(!n){e.log("HTML5 History API not supported properly - exiting");return}if(!r["on"]){e.log("Plugin set off manually - exiting");return}t.pronto(r);e(window).on("pronto.render",s);e().getPage(location.href,i)})};e.fn.ajaxify=function(n){$this=e(this);new t($this,n);return $this}})(jQuery);if(jQuery)(function(e){function u(t){e.extend(o,t||{});o.$body=e("body");o.$container=e(o.container);r=window.location.href;y();n.on("popstate",d);if(o.turbo)e(o.selector).hoverIntent(a);o.$body.on("click.pronto",o.selector,h);c()}function a(t){var n=t.currentTarget;if(window.location.protocol!==n.protocol||window.location.host!==n.host)return;e().getPage("+",n.href)}function f(e,t){if(e.indexOf("?")>0){e=e.substring(0,e.indexOf("?"))}return e+"?"+t}function l(t){var n=t.serialize();var r;r=e("input[name][type=submit]",t);if(r.length==0){e.log("Nothing found in function k() !");return n}var i=r.attr("name")+"="+r.val();if(n.length>0){n+="&"+i}else{n=i}return n}function c(t){if(!o.forms)return;e("form").submit(function(t){var i=e(t.target);if(!i.is("form")){i=i.filter("input[type=submit]").parents("form:first");if(i.length==0){return true}}var o=l(i);var t="get",u=i.attr("method");if(u.length>0&&u.toLowerCase()=="post")t="post";var a,c=i.attr("action");if(c!=null&&c.length>0)a=c;else a=r;if(t=="get")a=f(a,o);else{s={};s.data=o}e.log("Action href : "+a);n.trigger("pronto.submit",a);p(a);return false})}function h(e){var t=e.currentTarget;s=null;if(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||window.location.protocol!==t.protocol||window.location.host!==t.host){return}if(t.hash&&t.href.replace(t.hash,"")===window.location.href.replace(location.hash,"")||t.href===window.location.href+"#"){y();return}e.preventDefault();e.stopPropagation();if(r==t.href){y()}else{p(t.href)}}function p(t){n.trigger("pronto.request");var r=function(){v(t,0,true)};e().getPage(t,r,s)}function d(t){var i=t.originalEvent.state;if(i!==null&&i.url!==r){n.trigger("pronto.request");var s=function(){v(i.url,i.scroll,false)};e().getPage(i.url,s)}}function v(e,t,n){if(i!==null){clearTimeout(i);i=null}i=setTimeout(function(){g(e,t,n)},o.requestDelay)}function m(e,t){r=e;if(t){history.pushState(o.scrollTop?{url:r,scroll:0}:{url:r},"state-"+r,r)}else{y()}}function g(r,i,u){n.trigger("pronto.load");b(r);y();e("title").html(e().getPage("title").html());t.getPage("-");c();if(r.indexOf("#")+1){e("html, body").animate({scrollTop:e("#"+r.split("#")[1]).offset().top},500)}m(r,u);var a=jQuery.Event("pronto.render");a.same=s?true:false;n.trigger(a);if(o.scrollTop)n.scrollTop(i)}function y(){if(o.scrollTop){history.replaceState({url:r,scroll:n.scrollTop()},"state-"+r,r)}else{history.replaceState({url:r},"state-"+r,r)}}function b(e){if(typeof _gaq==="undefined")_gaq=[];_gaq.push(["_trackPageview"],e)}var t,n=e(window),r="",i=null,s=null;var o={selector:"a",requestKey:"pronto",requestDelay:0,forms:true,turbo:true,scrollTop:false};e.fn.pronto=function(n){t=e(this);u(n);return t}})(jQuery)
